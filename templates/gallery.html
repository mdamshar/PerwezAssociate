{% extends 'base.html' %}
{% load static %}

{% block title %}Gallery - Perwez Associate{% endblock %}

{% block content %}

<style>
    .gallery-header {
        background: linear-gradient(135deg, #3b82f6 0%, #1e40af 100%);
        color: white;
        padding: 60px 20px;
        margin-bottom: 40px;
        border-radius: 0;
    }

    .gallery-header h1 {
        margin-bottom: 10px;
        font-size: 2.5rem;
        font-weight: 700;
    }

    .gallery-header p {
        opacity: 0.9;
        font-size: 1.1rem;
    }

    .gallery-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
        gap: 25px;
        margin-bottom: 40px;
    }

    .gallery-item {
        background: white;
        border-radius: 8px;
        overflow: hidden;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
        cursor: pointer;
        position: relative;
        height: 250px;
    }

    .gallery-item:hover {
        box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
        transform: translateY(-8px);
    }

    .gallery-item-media {
        width: 100%;
        height: 100%;
        overflow: hidden;
        background: #f3f4f6;
        display: flex;
        align-items: center;
        justify-content: center;
        position: relative;
    }

    .gallery-item-media img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }

    .gallery-item:hover .gallery-item-media img {
        transform: scale(1.05);
    }

    .gallery-item-title {
        position: absolute;
        bottom: 0;
        left: 0;
        right: 0;
        background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
        color: white;
        padding: 20px 15px;
        font-size: 1.1rem;
        font-weight: 600;
        transform: translateY(100%);
        transition: transform 0.3s ease;
    }

    .gallery-item:hover .gallery-item-title {
        transform: translateY(0);
    }

    .empty-gallery {
        text-align: center;
        padding: 60px 20px;
        color: #6b7280;
    }

    .empty-gallery p {
        font-size: 1.1rem;
    }

    /* Lightbox Modal */
    .lightbox {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.6);
        z-index: 1000;
    }

    .lightbox.active {
        display: flex !important;
        align-items: center;
        justify-content: center;
    }

    .lightbox-content {
        position: relative;
        background: white;
        border-radius: 12px;
        padding: 25px;
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
        width: 90%;
        max-width: 450px;
    }

    .lightbox-media {
        text-align: center;
        background: #f9fafb;
        border-radius: 8px;
        overflow: hidden;
        display: flex;
        align-items: center;
        justify-content: center;
        height: 280px;
        margin-bottom: 15px;
    }

    .lightbox-media img {
        max-width: 100%;
        max-height: 100%;
        object-fit: contain;
    }

    .lightbox-title {
        color: #1f2937;
        text-align: center;
        margin-top: 15px;
        font-size: 1.1rem;
        font-weight: 600;
    }

    .lightbox-close {
        position: absolute;
        top: 10px;
        right: 15px;
        color: #1f2937;
        font-size: 28px;
        cursor: pointer;
        font-weight: bold;
        background: #f3f4f6;
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.3s ease;
    }

    .lightbox-close:hover {
        background: #3b82f6;
        color: white;
    }

    @media (max-width: 768px) {
        .gallery-header h1 {
            font-size: 2rem;
        }

        .gallery-grid {
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 15px;
        }

        .gallery-item {
            height: 180px;
        }

        .lightbox-content {
            width: 95%;
            max-width: 400px;
            padding: 20px;
        }

        .lightbox-media {
            height: 220px;
        }

        .lightbox-close {
            width: 35px;
            height: 35px;
            font-size: 24px;
            top: 8px;
            right: 10px;
        }
    }
</style>

<!-- Gallery Header -->
<div class="gallery-header">
    <div class="container">
        <h1>ðŸ“¸ Project Gallery</h1>
        <p>Explore our collection of stunning project images</p>
    </div>
</div>

<!-- Gallery Grid -->
<div class="container">
    {% if gallery_items %}
        <div class="gallery-grid">
            {% for item in gallery_items %}
                <div class="gallery-item" onclick="openLightbox(event)" data-title="{{ item.title }}">
                    <div class="gallery-item-media">
                        {% if item.image %}
                            <img src="{{ item.image.url }}" alt="{{ item.title }}">
                        {% else %}
                            <div style="display: flex; align-items: center; justify-content: center; width: 100%; height: 100%; background: #f3f4f6; color: #6b7280;">
                                <span>No image available</span>
                            </div>
                        {% endif %}
                    </div>
                    <div class="gallery-item-title">{{ item.title }}</div>
                </div>
            {% endfor %}
        </div>
    {% else %}
        <div class="empty-gallery">
            <h3>Gallery Coming Soon</h3>
            <p>Check back later for our project gallery showcase!</p>
        </div>
    {% endif %}
</div>

<!-- Lightbox -->
<div class="lightbox" id="lightbox">
    <div class="lightbox-content">
        <span class="lightbox-close" onclick="closeLightbox()">&times;</span>
        <div id="lightbox-media"></div>
        <div id="lightbox-title" class="lightbox-title"></div>
    </div>
</div>

<script>
    function openLightbox(event) {
        event.preventDefault();
        event.stopPropagation();
        
        const item = event.currentTarget;
        const title = item.dataset.title;
        const img = item.querySelector('img');
        
        if (img) {
            const mediaHtml = `<img src="${img.src}" alt="${title}">`;
            
            document.getElementById('lightbox-media').innerHTML = mediaHtml;
            document.getElementById('lightbox-title').textContent = title;
            
            const lightbox = document.getElementById('lightbox');
            lightbox.classList.add('active');
            lightbox.style.display = 'flex';
        }
    }

    function closeLightbox() {
        const lightbox = document.getElementById('lightbox');
        lightbox.classList.remove('active');
        lightbox.style.display = 'none';
    }

    // Close lightbox when clicking outside
    document.getElementById('lightbox').addEventListener('click', function(e) {
        if (e.target === this) {
            closeLightbox();
        }
    });

    // Close lightbox with Escape key
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape') {
            closeLightbox();
        }
    });
</script>

{% endblock %}
